<!DOCTYPE html>
  <html>
    <head>
      
      <!--Import materialize.css-->
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-rc.2/css/materialize.min.css">
      <!--Import Google Icon Font-->
      <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
      

      <!--Let browser know website is optimized for mobile-->
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    </head>
    <style>
      body
{
  background: #f5f5f5;
}

h5
{
  font-weight: 400;
}

.container
{
  margin-top: 80px;
  width: 400px;
  height: 650px;
}

.tabs .indicator
{
  background-color: #e0f2f1;
  height: 60px;
  opacity: 0.3;
}

.form-container
{
  padding: 40px;
  padding-top: 10px;
}

.confirmation-tabs-btn
{
  position: absolute;
}
</style>

<body>
   <div class="container white z-depth-2"> 
    <div class="card-panel teal lighten-2">
         <h5 class="center-align">REGISTER</h5>
         </div>
        
    <div id="register" class="col s12">
        <form class="col s12"id="postData">
            <div class="form-container">
                
                <div class="row">
                    <div class="input-field col s12"><i class="small material-icons prefix">person</i>

                        <input id="username" type="text" class="validate"placeholder="username">
                        
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12"><i class="small material-icons prefix">email</i>
                        <input id="email" type="email" class="validate"placeholder="Email">
                        
                    </div>
                </div>

                <div class="row">
                    <div class="input-field col s12"><i class="small material-icons prefix">lock</i>
                        <input id="password" type="password" class="validate"placeholder="Password"onkeyup="myFunction()">
                        
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s12"><i class="small material-icons prefix">lock</i>
                        <input id="cpass" type="password" class="validate"placeholder="Confirm Password"onkeyup="myFunction()">
                        
                    </div>

                </div>
                <div id="mess"></div>
                <center>
                    <button class="btn waves-effect waves-light teal" type="submit" name="action"id="ok">Submit</button>
                </center>
                <div class="right"><a href="http://localhost:3000"><u>Login</u></a></div>
            </div>
        </form>
    </div>
</div>

</body>
     <script>
       function myFunction(){
        var pass=document.getElementById('password').value;
        var cpass=document.getElementById('cpass').value;
        if(pass===cpass){
          document.getElementById('mess').innerHTML="Password matched";
          document.getElementById('mess').style.color="green";
        }
        else{
          document.getElementById('mess').innerHTML="Password not matched";
        
        document.getElementById('mess').style.color="red";
           }
      }

       
     </script>


<script>
    
    document.getElementById('postData').addEventListener('submit', postData);

    function postData(event){
        event.preventDefault();

        let username = document.getElementById('username').value;
      
        let email = document.getElementById('email').value;
        //console.log(u);
        let password 
        = document.getElementById('password').value;
        fetch('http://localhost:3000/api/register', {
            method: 'POST',
            headers : {
                'Accept': 'application/json',
                'Content-Type': 'application/json'

            },
            body:JSON.stringify({username:username,email:email,password:password})
        }).then((res) => {


            return res.json();
        })
            .then((data) => {

               console.log(data);
                 var text=JSON.stringify({username:username,email:email,password:password});
                 var obj=JSON.parse(text);

                 console.log(text);
                 alert(obj.username+" registered successfully");





            });
    }
</script>

</body>
</html>